{
  "$schema": "https://smapi.io/schemas/content-patcher.json",
  "Format": "1.30.0",
  "ConfigSchema": {
    "AddedNPCsAffectPerfection": {
      "Default": "false",
      "AllowValues": "true, false",
      "Section": "PerfectionScore"
    },
  },
  "DynamicTokens": [
    //Config
    {
      "Name": "AddedNPCsAffectPerfection",
      "Value": "false"
    },
    {
      "Name": "AddedNPCsAffectPerfection",
      "Value": "true",
      "When": {
        "AddedNPCsAffectPerfection": "true",
        "HasFlag |contains=Farm_Eternal": "false"
      }
    },
  ],
  "Changes": [
    {
      "LogName": "Load NPC Warp Room Map",
      "Action": "Load",
      "Target": "VisitingTales/Maps/ItsBenter.VisitingTales.NPCWarpRoom",
      "FromFile": "Maps/{{TargetWithoutPath}}.png"
    },
    {
      "Action": "EditData",
      "Target": "Data/Locations",
      "Entries": {
        "ItsBenter.VisitingTales.NPCWarpRoom": {
          "DisplayName": "{{i18n:ItsBenter.VisitingTales.NPCWarpRoom.Name}}",
          "DefaultArrivalTile": {
            "X": 3,
            "Y": 3
          },
          "ExcludeFromNpcPathfinding": false,
          "CreateOnLoad": {
            "MapPath": "VisitingTales\\Maps\\ItsBenter.VisitingTales.NPCWarpRoom",
            "Type": null,
            "AlwaysActive": false
          },
          "CustomFields": {}
        },
      }
    },
    {
      "LogName": "Add NPC warp inside the bus. Already taking into account SVE.",
      "Action": "EditMap",
      "Target": "Maps/BusStop",
      "TextOperations": [
        {
          "Operation": "Append",
          "Target": [
            "MapProperties",
            "NPCWarp"
          ],
          "Value": "13 9 ItsBenter.VisitingTales.NPCWarpRoom 6 3",
          "Delimiter": " "
        }
      ]
    },
    {
      "LogName": "NPCs base portraits",
      "Action": "Load",
      "Target": "Portraits/ItsBenterKarl, Portraits/ItsBenterDiane, Portraits/ItsBenterPaolo, Portraits/ItsBenterRiri",
      "FromFile": "{{Target}}.png"
    },
    {
      "LogName": "NPCs base sprites",
      "Action": "Load",
      "Target": "Characters/ItsBenterKarl, Characters/ItsBenterDiane, Characters/ItsBenterPaolo, Characters/ItsBenterRiri",
      "FromFile": "{{Target}}.png"
    },
    {
      "LogName": "NPCs data",
      "Action": "Include",
      "FromFile": "Data/ItsBenterKarl.json, Data/ItsBenterDiane.json, Data/ItsBenterPaolo.json, Data/ItsBenterRiri.json"
    },
    //blank.json is used to allow using content patcher token through EditData
    {
      "LogName": "NPCs blank dialogue",
      "Action": "Load",
      "Target": "Characters/Dialogue/ItsBenterKarl, Characters/Dialogue/ItsBenterDiane, Characters/Dialogue/ItsBenterPaolo, Characters/Dialogue/ItsBenterRiri",
      "FromFile": "blank.json"
    },
    {
      "LogName": "NPCs blank schedules",
      "Action": "Load",
      "Target": "Characters/Schedules/ItsBenterKarl, Characters/Schedules/ItsBenterDiane, Characters/Schedules/ItsBenterPaolo, Characters/Schedules/ItsBenterRiri",
      "FromFile": "blank.json"
    },
    {
      "LogName": "NPCs dialogue",
      "Action": "Include",
      "FromFile": "Characters/Dialogue/ItsBenterKarl.json, Characters/Dialogue/ItsBenterDiane.json, Characters/Dialogue/ItsBenterPaolo.json, Characters/Dialogue/ItsBenterRiri.json"
    },
    {
      "LogName": "NPCs schedules",
      "Action": "Include",
      "FromFile": "Characters/Schedules/ItsBenterKarl.json, Characters/Schedules/ItsBenterDiane.json, Characters/Schedules/ItsBenterPaolo.json, Characters/Schedules/ItsBenterRiri.json"
    },
    {
      "LogName": "NPCs events",
      "Action": "Include",
      "FromFile": "Data/Events/ItsBenterKarl.json, Data/Events/ItsBenterDiane.json, Data/Events/ItsBenterPaolo.json, Data/Events/ItsBenterRiri.json"
    },
    {
      "LogName": "NPCs animation",
      "Action": "EditData",
      "Target": "Data/animationDescriptions",
      "Entries": {
        //Diane
        "ItsBenterDiane_Sleep": "20/20/20",
        "ItsBenterDiane_Writing": "20/20/20",
        "ItsBenterDiane_Reading": "24/24/24",
        "ItsBenterDiane_Reflect": "24/24/24",
        //Karl
        "ItsBenterKarl_Sleep": "20/20/20",
        "ItsBenterKarl_FishingFacingDown": "20/20/20",
        //Paolo
        "ItsBenterPaolo_Sleep": "20/20/20",
        "ItsBenterPaolo_Tap": "24/24/24",
        //Riri
        "ItsBenterRiri_sleep": "20/20/20",
        "ItsBenterRiri_read": "24/24/24"
      }
    }
  ]
}